<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree Foundations - Interactive Learning</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }
        .nav-bar {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            padding: 15px 30px;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .nav-bar a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .nav-bar h1 {
            color: white;
            font-size: 1.5em;
            flex: 1;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .hero-section {
            background: white;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .hero-section h2 {
            font-size: 2.5em;
            color: #1a1a2e;
            margin-bottom: 15px;
        }
        .hero-section p {
            font-size: 1.2em;
            color: #666;
            line-height: 1.8;
        }
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        .concept-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border-left: 5px solid #10b981;
        }
        .concept-card h3 {
            font-size: 1.4em;
            color: #1a1a2e;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .concept-card h3 i {
            color: #10b981;
        }
        .concept-card p {
            color: #555;
            line-height: 1.7;
            margin-bottom: 15px;
        }
        .concept-card ul {
            margin-left: 20px;
            color: #555;
        }
        .concept-card li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        .interactive-section {
            background: white;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .interactive-section h2 {
            font-size: 1.8em;
            color: #1a1a2e;
            margin-bottom: 25px;
            border-bottom: 3px solid #10b981;
            padding-bottom: 10px;
        }
        .tree-diagram {
            display: flex;
            justify-content: center;
            padding: 30px;
            background: #f8f8f8;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .tree-diagram canvas {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
        }
        .info-box {
            background: #f0fdf4;
            border: 2px solid #10b981;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .info-box h4 {
            color: #059669;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .info-box p, .info-box li {
            color: #166534;
        }
        .code-example {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
        }
        .code-example .keyword { color: #569cd6; }
        .code-example .string { color: #ce9178; }
        .code-example .comment { color: #6a9955; }
        .code-example .function { color: #dcdcaa; }
        .terminology-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .terminology-table th, .terminology-table td {
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            text-align: left;
        }
        .terminology-table th {
            background: #10b981;
            color: white;
            font-weight: 600;
        }
        .terminology-table tr:nth-child(even) {
            background: #f8f8f8;
        }
        .terminology-table tr:hover {
            background: #f0fdf4;
        }
        .highlight-term {
            background: #fef3c7;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-primary {
            background: #10b981;
            color: white;
        }
        .btn-primary:hover {
            background: #059669;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background: white;
            color: #1a1a2e;
            border: 2px solid #e0e0e0;
        }
        .btn-secondary:hover {
            border-color: #10b981;
            color: #10b981;
        }
        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .property-highlight {
            display: inline-block;
            padding: 4px 12px;
            background: #dbeafe;
            color: #1e40af;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 4px;
        }
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
        }
        .node-info {
            background: #f8f8f8;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        .node-info h4 {
            color: #1a1a2e;
            margin-bottom: 10px;
        }
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #333;
        }
    </style>
</head>
<body>
    <div class="nav-bar">
        <a href="index.html"><i class="fas fa-home"></i> Home</a>
        <h1><i class="fas fa-seedling"></i> Tree Foundations</h1>
        <a href="binary-trees.html">Next: Binary Trees <i class="fas fa-arrow-right"></i></a>
    </div>

    <div class="container">
        <div class="hero-section">
            <h2>What is a Tree?</h2>
            <p>A <strong>tree</strong> is a hierarchical data structure consisting of nodes connected by edges. Unlike linear data structures (arrays, linked lists), trees represent data in a hierarchical manner - like a family tree, file system, or organization chart.</p>
            
            <div class="info-box">
                <h4><i class="fas fa-lightbulb"></i> Key Properties of Trees</h4>
                <ul>
                    <li>A tree with <strong>N nodes</strong> has exactly <strong>N-1 edges</strong></li>
                    <li>There is <strong>exactly one path</strong> between any two nodes</li>
                    <li>Trees are <strong>connected</strong> (every node is reachable) and <strong>acyclic</strong> (no loops)</li>
                    <li>Removing any edge <strong>disconnects</strong> the tree</li>
                </ul>
            </div>
        </div>

        <!-- Interactive Tree Visualization -->
        <div class="interactive-section">
            <h2><i class="fas fa-eye"></i> Interactive Tree Visualization</h2>
            <p style="margin-bottom: 20px;">Click on any node to highlight it and see its properties. Hover to see relationships.</p>
            
            <div class="controls">
                <button class="btn btn-primary" onclick="createSampleTree()">
                    <i class="fas fa-tree"></i> Generate Sample Tree
                </button>
                <button class="btn btn-secondary" onclick="highlightRoot()">
                    <i class="fas fa-crown"></i> Highlight Root
                </button>
                <button class="btn btn-secondary" onclick="highlightLeaves()">
                    <i class="fas fa-leaf"></i> Highlight Leaves
                </button>
                <button class="btn btn-secondary" onclick="showLevels()">
                    <i class="fas fa-layer-group"></i> Show Levels
                </button>
                <button class="btn btn-secondary" onclick="resetHighlight()">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
            
            <div class="tree-diagram">
                <canvas id="treeCanvas" width="800" height="400"></canvas>
            </div>
            
            <div class="node-info" id="nodeInfo">
                <h4>Node Information</h4>
                <p>Click on a node to see its properties (parent, children, depth, height, etc.)</p>
            </div>
            
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: #10b981;"></div> Root Node</div>
                <div class="legend-item"><div class="legend-color" style="background: #3b82f6;"></div> Internal Node</div>
                <div class="legend-item"><div class="legend-color" style="background: #f59e0b;"></div> Leaf Node</div>
                <div class="legend-item"><div class="legend-color" style="background: #ef4444;"></div> Selected Node</div>
            </div>
        </div>

        <!-- Terminology Section -->
        <div class="interactive-section">
            <h2><i class="fas fa-book"></i> Tree Terminology</h2>
            
            <table class="terminology-table">
                <tr>
                    <th>Term</th>
                    <th>Definition</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td><span class="highlight-term">Root</span></td>
                    <td>The topmost node of the tree with no parent</td>
                    <td>CEO in a company hierarchy</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Node</span></td>
                    <td>An element containing data and references to children</td>
                    <td>Any employee in the hierarchy</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Edge</span></td>
                    <td>Connection between two nodes (parent-child relationship)</td>
                    <td>Reporting relationship</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Parent</span></td>
                    <td>Node directly above another node</td>
                    <td>Manager of an employee</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Child</span></td>
                    <td>Node directly below another node</td>
                    <td>Direct report</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Siblings</span></td>
                    <td>Nodes with the same parent</td>
                    <td>Colleagues with same manager</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Leaf</span></td>
                    <td>Node with no children</td>
                    <td>Employee with no direct reports</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Internal Node</span></td>
                    <td>Node with at least one child (non-leaf)</td>
                    <td>Any manager</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Degree</span></td>
                    <td>Number of children a node has</td>
                    <td>Manager with 3 reports has degree 3</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Level</span></td>
                    <td>Distance from root (root is level 0)</td>
                    <td>CEO is level 0, VPs are level 1</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Depth</span></td>
                    <td>Number of edges from root to node</td>
                    <td>Same as level</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Height</span></td>
                    <td>Maximum depth from node to any leaf in its subtree</td>
                    <td>Longest chain of reports below</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Subtree</span></td>
                    <td>A node and all its descendants</td>
                    <td>A department (manager + all employees below)</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Ancestor</span></td>
                    <td>Any node on the path from root to current node</td>
                    <td>All managers above you</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Descendant</span></td>
                    <td>Any node in the subtree of current node</td>
                    <td>All employees below you</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Path</span></td>
                    <td>Sequence of nodes connected by edges</td>
                    <td>Chain of command</td>
                </tr>
                <tr>
                    <td><span class="highlight-term">Forest</span></td>
                    <td>Collection of disjoint trees</td>
                    <td>Multiple separate companies</td>
                </tr>
            </table>
        </div>

        <!-- Types of Trees -->
        <div class="concept-grid">
            <div class="concept-card">
                <h3><i class="fas fa-crown"></i> Rooted vs Unrooted Trees</h3>
                <p><strong>Rooted Tree:</strong> Has a designated root node. Parent-child relationships exist. Most common in CS.</p>
                <p><strong>Unrooted Tree:</strong> No designated root. Used in network topology and phylogenetics. Any node can be the root.</p>
                <div style="margin-top: 15px;">
                    <span class="property-highlight">Rooted: Hierarchy</span>
                    <span class="property-highlight">Unrooted: Graph</span>
                </div>
            </div>

            <div class="concept-card">
                <h3><i class="fas fa-sort"></i> Ordered vs Unordered Trees</h3>
                <p><strong>Ordered Tree:</strong> Children of each node have a specific order (left-to-right). Binary trees are ordered.</p>
                <p><strong>Unordered Tree:</strong> Children have no specific order. Set-based children.</p>
                <div style="margin-top: 15px;">
                    <span class="property-highlight">Ordered: First, Second child</span>
                    <span class="property-highlight">Unordered: Just children</span>
                </div>
            </div>

            <div class="concept-card">
                <h3><i class="fas fa-calculator"></i> Degree of Node & Tree</h3>
                <p><strong>Degree of a Node:</strong> The number of children that node has.</p>
                <p><strong>Degree of a Tree:</strong> Maximum degree among all nodes in the tree.</p>
                <div class="code-example">
<span class="comment">// Example: If a tree's nodes have degrees [2, 3, 0, 1, 2]</span>
<span class="comment">// Tree degree = max(2, 3, 0, 1, 2) = 3</span>
</div>
            </div>

            <div class="concept-card">
                <h3><i class="fas fa-ruler-vertical"></i> Height vs Depth</h3>
                <p><strong>Depth of node:</strong> Number of edges from root to that node (root has depth 0).</p>
                <p><strong>Height of node:</strong> Number of edges on longest path from node to a leaf.</p>
                <p><strong>Height of tree:</strong> Height of the root node (maximum depth of any node).</p>
                <div class="code-example">
<span class="comment">// Root depth = 0, Root height = tree height</span>
<span class="comment">// Leaf depth = varies, Leaf height = 0</span>
</div>
            </div>

            <div class="concept-card">
                <h3><i class="fas fa-arrows-alt"></i> Distance Between Nodes</h3>
                <p>The <strong>distance</strong> between two nodes is the number of edges on the shortest path connecting them.</p>
                <p>In a tree, there's exactly one path between any two nodes, so the distance is always unique.</p>
                <div class="code-example">
<span class="function">distance</span>(u, v) = <span class="function">depth</span>(u) + <span class="function">depth</span>(v) - 2 * <span class="function">depth</span>(LCA(u, v))
</div>
            </div>

            <div class="concept-card">
                <h3><i class="fas fa-info-circle"></i> Size & Empty Tree</h3>
                <p><strong>Size of tree:</strong> Total number of nodes in the tree.</p>
                <p><strong>Empty tree:</strong> A tree with no nodes (size = 0). Some definitions allow this, others don't.</p>
                <div class="code-example">
<span class="keyword">function</span> <span class="function">size</span>(node) {
    <span class="keyword">if</span> (node === <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;
    <span class="keyword">return</span> <span class="number">1</span> + <span class="function">sum</span>(children.map(size));
}
</div>
            </div>
        </div>

        <!-- Code Implementation -->
        <div class="interactive-section">
            <h2><i class="fas fa-code"></i> Tree Node Implementation</h2>
            
            <p style="margin-bottom: 20px;">Here's how to implement a basic tree node in different programming languages:</p>
            
            <h3 style="margin-bottom: 10px;">JavaScript</h3>
            <div class="code-example">
<span class="keyword">class</span> <span class="function">TreeNode</span> {
    <span class="function">constructor</span>(value) {
        <span class="keyword">this</span>.value = value;
        <span class="keyword">this</span>.children = [];  <span class="comment">// For general tree</span>
        <span class="comment">// For binary tree: this.left = null; this.right = null;</span>
    }

    <span class="function">addChild</span>(node) {
        <span class="keyword">this</span>.children.push(node);
    }

    <span class="function">isLeaf</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.children.length === <span class="number">0</span>;
    }

    <span class="function">degree</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.children.length;
    }
}

<span class="comment">// Calculate height of tree</span>
<span class="keyword">function</span> <span class="function">height</span>(node) {
    <span class="keyword">if</span> (!node || node.isLeaf()) <span class="keyword">return</span> <span class="number">0</span>;
    <span class="keyword">return</span> <span class="number">1</span> + Math.max(...node.children.map(height));
}

<span class="comment">// Calculate size of tree</span>
<span class="keyword">function</span> <span class="function">size</span>(node) {
    <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="number">0</span>;
    <span class="keyword">return</span> <span class="number">1</span> + node.children.reduce((sum, c) => sum + size(c), <span class="number">0</span>);
}
</div>

            <h3 style="margin: 20px 0 10px;">Python</h3>
            <div class="code-example">
<span class="keyword">class</span> <span class="function">TreeNode</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, value):
        self.value = value
        self.children = []  <span class="comment"># For general tree</span>
    
    <span class="keyword">def</span> <span class="function">add_child</span>(self, node):
        self.children.append(node)
    
    <span class="keyword">def</span> <span class="function">is_leaf</span>(self):
        <span class="keyword">return</span> len(self.children) == <span class="number">0</span>
    
    <span class="keyword">def</span> <span class="function">degree</span>(self):
        <span class="keyword">return</span> len(self.children)

<span class="keyword">def</span> <span class="function">height</span>(node):
    <span class="keyword">if</span> node <span class="keyword">is</span> None <span class="keyword">or</span> node.is_leaf():
        <span class="keyword">return</span> <span class="number">0</span>
    <span class="keyword">return</span> <span class="number">1</span> + max(height(c) <span class="keyword">for</span> c <span class="keyword">in</span> node.children)

<span class="keyword">def</span> <span class="function">size</span>(node):
    <span class="keyword">if</span> node <span class="keyword">is</span> None:
        <span class="keyword">return</span> <span class="number">0</span>
    <span class="keyword">return</span> <span class="number">1</span> + sum(size(c) <span class="keyword">for</span> c <span class="keyword">in</span> node.children)
</div>
        </div>

        <!-- Practice Problems -->
        <div class="interactive-section">
            <h2><i class="fas fa-tasks"></i> Practice Questions</h2>
            
            <div class="info-box">
                <h4><i class="fas fa-question-circle"></i> Quick Quiz</h4>
                <p>Test your understanding of tree concepts:</p>
            </div>
            
            <div id="quiz-container">
                <div class="quiz-question" id="q1">
                    <p><strong>1. A tree with 10 nodes has how many edges?</strong></p>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 1, 9)">8</button>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 1, 9)">9</button>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 1, 9)">10</button>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 1, 9)">11</button>
                    <p class="answer-feedback" id="feedback1"></p>
                </div>
                
                <div class="quiz-question" id="q2" style="margin-top: 20px;">
                    <p><strong>2. What is the height of a single-node tree?</strong></p>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 2, 0)">-1</button>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 2, 0)">0</button>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 2, 0)">1</button>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 2, 0)">undefined</button>
                    <p class="answer-feedback" id="feedback2"></p>
                </div>
                
                <div class="quiz-question" id="q3" style="margin-top: 20px;">
                    <p><strong>3. If a node has depth 5, it is at level ___?</strong></p>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 3, 5)">4</button>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 3, 5)">5</button>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 3, 5)">6</button>
                    <button class="btn btn-secondary" onclick="checkAnswer(event, 3, 5)">depends on tree</button>
                    <p class="answer-feedback" id="feedback3"></p>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-buttons">
            <a href="index.html" class="btn btn-secondary">
                <i class="fas fa-home"></i> Back to Home
            </a>
            <a href="binary-trees.html" class="btn btn-primary">
                Next: Binary Trees <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('treeCanvas');
        const ctx = canvas.getContext('2d');
        
        class TreeNode {
            constructor(value, x, y) {
                this.value = value;
                this.children = [];
                this.parent = null;
                this.x = x;
                this.y = y;
                this.level = 0;
            }
        }

        let treeRoot = null;
        let allNodes = [];
        let selectedNode = null;
        let highlightMode = null;

        function createSampleTree() {
            // Create a sample tree for demonstration
            treeRoot = new TreeNode('A', 400, 50);
            treeRoot.level = 0;
            allNodes = [treeRoot];

            const nodeB = new TreeNode('B', 200, 130);
            const nodeC = new TreeNode('C', 400, 130);
            const nodeD = new TreeNode('D', 600, 130);
            
            [nodeB, nodeC, nodeD].forEach(n => { n.level = 1; n.parent = treeRoot; });
            treeRoot.children = [nodeB, nodeC, nodeD];
            allNodes.push(nodeB, nodeC, nodeD);

            const nodeE = new TreeNode('E', 120, 210);
            const nodeF = new TreeNode('F', 280, 210);
            const nodeG = new TreeNode('G', 400, 210);
            const nodeH = new TreeNode('H', 520, 210);
            const nodeI = new TreeNode('I', 680, 210);

            nodeE.level = nodeF.level = 2; nodeE.parent = nodeF.parent = nodeB;
            nodeG.level = 2; nodeG.parent = nodeC;
            nodeH.level = nodeI.level = 2; nodeH.parent = nodeI.parent = nodeD;

            nodeB.children = [nodeE, nodeF];
            nodeC.children = [nodeG];
            nodeD.children = [nodeH, nodeI];
            allNodes.push(nodeE, nodeF, nodeG, nodeH, nodeI);

            const nodeJ = new TreeNode('J', 120, 290);
            const nodeK = new TreeNode('K', 400, 290);
            const nodeL = new TreeNode('L', 520, 290);

            nodeJ.level = 3; nodeJ.parent = nodeE;
            nodeK.level = 3; nodeK.parent = nodeG;
            nodeL.level = 3; nodeL.parent = nodeH;

            nodeE.children = [nodeJ];
            nodeG.children = [nodeK];
            nodeH.children = [nodeL];
            allNodes.push(nodeJ, nodeK, nodeL);

            highlightMode = null;
            selectedNode = null;
            drawTree();
        }

        function getNodeColor(node) {
            if (selectedNode === node) return '#ef4444';
            if (highlightMode === 'root' && node === treeRoot) return '#10b981';
            if (highlightMode === 'leaves' && node.children.length === 0) return '#f59e0b';
            if (highlightMode === 'levels') {
                const colors = ['#10b981', '#3b82f6', '#f59e0b', '#ef4444'];
                return colors[node.level % colors.length];
            }
            if (node === treeRoot) return '#10b981';
            if (node.children.length === 0) return '#f59e0b';
            return '#3b82f6';
        }

        function drawTree() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (!treeRoot) {
                ctx.font = '18px Segoe UI';
                ctx.fillStyle = '#666';
                ctx.textAlign = 'center';
                ctx.fillText('Click "Generate Sample Tree" to start', canvas.width / 2, canvas.height / 2);
                return;
            }

            // Draw edges
            allNodes.forEach(node => {
                node.children.forEach(child => {
                    ctx.beginPath();
                    ctx.moveTo(node.x, node.y);
                    ctx.lineTo(child.x, child.y);
                    ctx.strokeStyle = '#333';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                });
            });

            // Draw nodes
            allNodes.forEach(node => {
                ctx.beginPath();
                ctx.arc(node.x, node.y, 25, 0, 2 * Math.PI);
                ctx.fillStyle = getNodeColor(node);
                ctx.fill();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.stroke();

                ctx.font = 'bold 16px Segoe UI';
                ctx.fillStyle = 'white';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(node.value, node.x, node.y);
            });

            // Draw level labels if showing levels
            if (highlightMode === 'levels') {
                const levels = Math.max(...allNodes.map(n => n.level)) + 1;
                for (let i = 0; i < levels; i++) {
                    ctx.font = '14px Segoe UI';
                    ctx.fillStyle = '#666';
                    ctx.textAlign = 'left';
                    ctx.fillText(`Level ${i}`, 20, 50 + i * 80);
                }
            }
        }

        function highlightRoot() {
            highlightMode = 'root';
            drawTree();
        }

        function highlightLeaves() {
            highlightMode = 'leaves';
            drawTree();
        }

        function showLevels() {
            highlightMode = 'levels';
            drawTree();
        }

        function resetHighlight() {
            highlightMode = null;
            selectedNode = null;
            drawTree();
            document.getElementById('nodeInfo').innerHTML = `
                <h4>Node Information</h4>
                <p>Click on a node to see its properties (parent, children, depth, height, etc.)</p>
            `;
        }

        function getHeight(node) {
            if (!node || node.children.length === 0) return 0;
            return 1 + Math.max(...node.children.map(c => getHeight(c)));
        }

        function getDescendantCount(node) {
            if (!node) return 0;
            return node.children.reduce((sum, c) => sum + 1 + getDescendantCount(c), 0);
        }

        canvas.addEventListener('click', function(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            for (let node of allNodes) {
                const dx = x - node.x;
                const dy = y - node.y;
                if (dx * dx + dy * dy <= 625) { // 25^2
                    selectedNode = node;
                    highlightMode = null;
                    drawTree();
                    
                    const siblings = node.parent ? node.parent.children.filter(c => c !== node) : [];
                    const ancestors = [];
                    let curr = node.parent;
                    while (curr) {
                        ancestors.push(curr.value);
                        curr = curr.parent;
                    }

                    document.getElementById('nodeInfo').innerHTML = `
                        <h4>Node: ${node.value}</h4>
                        <p><strong>Parent:</strong> ${node.parent ? node.parent.value : 'None (Root)'}</p>
                        <p><strong>Children:</strong> ${node.children.length > 0 ? node.children.map(c => c.value).join(', ') : 'None (Leaf)'}</p>
                        <p><strong>Siblings:</strong> ${siblings.length > 0 ? siblings.map(s => s.value).join(', ') : 'None'}</p>
                        <p><strong>Degree:</strong> ${node.children.length}</p>
                        <p><strong>Depth/Level:</strong> ${node.level}</p>
                        <p><strong>Height:</strong> ${getHeight(node)}</p>
                        <p><strong>Descendants:</strong> ${getDescendantCount(node)}</p>
                        <p><strong>Ancestors:</strong> ${ancestors.length > 0 ? ancestors.join(' → ') : 'None'}</p>
                        <p><strong>Is Leaf:</strong> ${node.children.length === 0 ? 'Yes' : 'No'}</p>
                        <p><strong>Is Root:</strong> ${node === treeRoot ? 'Yes' : 'No'}</p>
                    `;
                    return;
                }
            }
        });

        function checkAnswer(event, qNum, correct) {
            const buttons = document.querySelectorAll(`#q${qNum} button`);
            const clickedBtn = event.target;
            buttons.forEach(btn => {
                const val = parseInt(btn.textContent);
                if (val === correct || btn.textContent === String(correct)) {
                    btn.style.background = '#10b981';
                    btn.style.color = 'white';
                    btn.style.borderColor = '#10b981';
                } else if (btn !== clickedBtn) {
                    btn.style.opacity = '0.5';
                }
            });
            
            const feedback = document.getElementById(`feedback${qNum}`);
            if (clickedBtn.textContent.includes(String(correct))) {
                feedback.innerHTML = '<span style="color: #10b981;">✓ Correct!</span>';
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">✗ Incorrect. The answer is ${correct}.</span>`;
            }
        }

        // Initialize
        createSampleTree();
    </script>
</body>
</html>
